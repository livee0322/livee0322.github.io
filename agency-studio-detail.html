<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>스튜디오 상세 - 거래요청</title>
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.1.0/fonts/remixicon.css" rel="stylesheet" />
  <link rel="stylesheet" href="/main.css?v=1.03" />
  <style>
    .studio-detail {
      padding: 1rem;
    }
    .studio-image {
      width: 100%;
      border-radius: 1rem;
      margin-bottom: 1rem;
    }
    .info-box {
      background: #fff;
      padding: 1rem;
      border-radius: 1rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }
    .info-box h2 {
      margin-bottom: 0.5rem;
      font-size: 1.1rem;
    }
    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 6px;
      font-size: 0.85rem;
    }
    .calendar div {
      background: #eee;
      padding: 0.6rem 0;
      text-align: center;
      border-radius: 0.5rem;
      cursor: pointer;
    }
    .calendar div.selected {
      background: #5c6eff;
      color: white;
      font-weight: bold;
    }
    .selected-range {
      margin-top: 1rem;
      font-size: 0.9rem;
    }
    .estimate-box {
      margin-top: 1.5rem;
    }
    .estimate-box input {
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.3rem;
      border: 1px solid #ccc;
      border-radius: 0.5rem;
    }
    .btn-request {
      margin-top: 2rem;
      width: 100%;
      background: #5c6eff;
      color: white;
      border: none;
      border-radius: 0.5rem;
      padding: 0.75rem;
      font-size: 1rem;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <header class="header">
    <div class="logo">Livee</div>
    <div class="right-icons">
      <i class="ri-search-line"></i>
      <i class="ri-notification-3-line"></i>
      <i class="ri-user-line"></i>
    </div>
  </header>

  <div class="studio-detail">
    <img src="https://via.placeholder.com/600x300?text=스튜디오" alt="스튜디오" class="studio-image">
    
    <div class="info-box">
      <h2>📍 위치</h2>
      <p>서울 강남구 도산대로 123</p>
    </div>
    <div class="info-box">
      <h2>💰 기본 단가</h2>
      <p>시간당 5만원</p>
    </div>

    <div class="info-box">
      <h2>🗓️ 가능한 날짜 선택</h2>
      <div class="calendar" id="calendar"></div>
      <div class="selected-range" id="selectedRange"></div>
    </div>

    <div class="info-box estimate-box">
      <h2>⏱️ 희망 촬영 시간 (시간 단위)</h2>
      <input type="number" id="hours" min="1" max="24" value="2" onchange="calculateTotal()">
      <p style="margin-top: 0.8rem">💵 예상 금액: <span id="price">100,000</span>원</p>
    </div>

    <button class="btn-request">거래 요청하기</button>
  </div>

  <script>
    const calendar = document.getElementById("calendar");
    const selectedRange = document.getElementById("selectedRange");
    const priceEl = document.getElementById("price");

    let selected = [];
    const today = new Date();
    const year = today.getFullYear();
    const month = today.getMonth();
    const unitPrice = 50000;

    function generateCalendar() {
      const firstDay = new Date(year, month, 1).getDay();
      const lastDate = new Date(year, month + 1, 0).getDate();

      for (let i = 0; i < firstDay; i++) {
        const empty = document.createElement("div");
        calendar.appendChild(empty);
      }

      for (let i = 1; i <= lastDate; i++) {
        const cell = document.createElement("div");
        cell.textContent = i;
        cell.addEventListener("click", () => toggleDate(i));
        calendar.appendChild(cell);
      }
    }

    function toggleDate(day) {
      const index = selected.indexOf(day);
      if (index > -1) {
        selected.splice(index, 1);
      } else {
        selected.push(day);
      }
      selected.sort((a, b) => a - b);
      updateUI();
    }

    function updateUI() {
      document.querySelectorAll(".calendar div").forEach(el => {
        if (!el.textContent) return;
        const num = parseInt(el.textContent);
        el.classList.toggle("selected", selected.includes(num));
      });

      selectedRange.innerHTML = formatRanges(selected).join('<br>');
    }

    function formatRanges(days) {
      const ranges = [];
      let start = null;
      let end = null;

      for (let i = 0; i < days.length; i++) {
        if (start === null) {
          start = days[i];
          end = days[i];
        } else if (days[i] === end + 1) {
          end = days[i];
        } else {
          ranges.push(rangeText(start, end));
          start = days[i];
          end = days[i];
        }
      }
      if (start !== null) {
        ranges.push(rangeText(start, end));
      }
      return ranges;
    }

    function rangeText(start, end) {
      if (start === end) return `${year}-${month+1}-${start}`;
      return `${year}-${month+1}-${start} ~ ${year}-${month+1}-${end}`;
    }

    function calculateTotal() {
      const hours = parseInt(document.getElementById("hours").value) || 0;
      const total = hours * unitPrice;
      priceEl.textContent = total.toLocaleString();
    }

    generateCalendar();
    calculateTotal();
  </script>
</body>
</html>
